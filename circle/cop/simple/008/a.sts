#/bin/sh

# simplify

c=$1

out() {
echo ""
echo "=== start $1"
cat $1
echo "=== end $1"
rm -f $1
}

run(){
echo ""
echo "[$1 $2]"
$c $1 $2
if [ "$3" != "" ]; then
test -f $3 && out $3
fi
}

run -cn a.cir
run -cm a.cir.out
run -cv a.cir.out.out

# simplification changes order of output - expected
#run -ct a.cir
#run -ct a.cir.out.out.out
#cmp a.cir.ttb a.cir.out.out.out.ttb && echo CMP OK

out a.cir.out
out a.cir.out.out
out a.cir.out.out.out

#out a.cir.ttb
#out a.cir.out.out.out.ttb
